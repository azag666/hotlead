Aqui está a versão atualizada do `index (1).html` que implementa a funcionalidade de "clicar na campanha" para visualizar os conjuntos de anúncios e criativos relacionados.

**Principais Mudanças:**

1.  **Seleção de Campanha:** Na `CampaignsPage`, agora é possível clicar em um cartão de campanha para selecioná-lo. Quando uma campanha é selecionada, ela fica visualmente destacada e o estado `selectedCampaignId` é atualizado.
2.  **Filtro por Campanha nos Conjuntos de Anúncios e Criativos:**
      * As abas "Conjuntos de Anúncios" e "Criativos" agora exibem apenas os itens que pertencem à campanha selecionada.
      * Se nenhuma campanha estiver selecionada (ou seja, `selectedCampaignId` for nulo), as abas mostram todos os conjuntos de anúncios e criativos disponíveis, como antes.
3.  **Botão "Voltar para Campanhas":** Adicionei um botão "Voltar para Campanhas" quando uma campanha está selecionada. Clicar nele desmarca a campanha selecionada e retorna à visualização de todas as campanhas.
4.  **UI de Seleção:** A campanha selecionada agora tem um destaque visual para indicar que está ativa.
5.  **Refinamento do `renderDataCards`:** A função `renderDataCards` foi ajustada para aceitar um parâmetro de `campaignId` e filtrar os dados dos conjuntos de anúncios e criativos.

Com esta atualização, você terá uma experiência de navegação mais interativa na seção de campanhas.

```html
<!DOCTYPE html>
<html lang="pt-BR" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotLead Dashboard - Profissional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        html, body, #root {
            height: 100%;
        }
        .truncate-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #darkModeToggle.spin-active {
            animation: spin 0.5s forwards;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .group:hover .rotate-on-hover {
            transform: rotate(360deg);
            transition: transform 0.5s ease-in-out;
        }
        /* Custom scrollbar for dark mode */
        .dark ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #333;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
        .table-container {
            overflow-x: auto;
        }
        .custom-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        .custom-table th, .custom-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #4a4a4a; /* Darker border for dark theme */
        }
        .custom-table th {
            background-color: #3a3a3a; /* Slightly lighter header for dark theme */
            color: #e0e0e0;
            font-weight: 600;
            text-transform: uppercase;
        }
        .custom-table tr:hover {
            background-color: #2a2a2a; /* Lighter hover for dark theme */
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div id="root" class="min-h-full flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // --- Funções de Ajuda ---
        const formatCurrency = (value) => {
            const num = Number(value);
            if (isNaN(num)) return "R$ 0,00";
            return num.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
        };

        const formatDate = (dateStr) => {
            if (!dateStr) return "-";
            const d = new Date(dateStr);
            return d.toLocaleDateString("pt-BR");
        };

        const calculateProfit = (revenue, spending) => {
            return revenue - spending;
        };

        // --- Mock Data (Dados de simulação para desenvolvimento) ---
        // Em um ambiente real, estes dados viriam de APIs do seu backend ou das plataformas.

        const MOCK_SALES_DATA = [
            { id: 'sale1', botId: 'bot_alpha', amount: 120.00, pixStatus: 'paid', date: '2025-07-15T10:00:00Z', product: 'Curso A', customer: 'João Silva' },
            { id: 'sale2', botId: 'bot_beta', amount: 85.50, pixStatus: 'generated', date: '2025-07-15T11:30:00Z', product: 'Ebook B', customer: 'Maria Souza' },
            { id: 'sale3', botId: 'bot_alpha', amount: 250.00, pixStatus: 'paid', date: '2025-07-16T14:15:00Z', product: 'Mentoria C', customer: 'Carlos Lima' },
            { id: 'sale4', botId: 'bot_gamma', amount: 45.00, pixStatus: 'paid', date: '2025-07-16T16:45:00Z', product: 'Planilha D', customer: 'Ana Paula' },
            { id: 'sale5', botId: 'bot_beta', amount: 180.00, pixStatus: 'paid', date: '2025-07-17T09:00:00Z', product: 'Software E', customer: 'Pedro Costa' },
            { id: 'sale6', botId: 'bot_alpha', amount: 99.90, pixStatus: 'generated', date: '2025-07-17T13:00:00Z', product: 'Workshop F', customer: 'Fernanda Dias' },
            { id: 'sale7', botId: 'bot_gamma', amount: 300.00, pixStatus: 'paid', date: '2025-07-17T15:00:00Z', product: 'Consultoria G', customer: 'Roberto Alves' },
            { id: 'sale8', botId: 'bot_alpha', amount: 50.00, pixStatus: 'paid', date: '2025-07-18T08:00:00Z', product: 'Plugin H', customer: 'Mariana Santos' },
            { id: 'sale9', botId: 'bot_beta', amount: 110.00, pixStatus: 'generated', date: '2025-07-18T12:00:00Z', product: 'Template I', customer: 'Lucas Rocha' },
            { id: 'sale10', botId: 'bot_gamma', amount: 75.00, pixStatus: 'paid', date: '2025-07-18T14:00:00Z', product: 'Guia J', customer: 'Juliana Castro' },
        ];

        const MOCK_BOTS_DATA = [
            { id: 'bot_alpha', name: 'Bot Alfa de Vendas', status: 'ativo', token: 'token_alfa_123' },
            { id: 'bot_beta', name: 'Bot Beta de Suporte', status: 'ativo', token: 'token_beta_456' },
            { id: 'bot_gamma', name: 'Bot Gamma de Marketing', status: 'inativo', token: 'token_gamma_789' },
            { id: 'bot_delta', name: 'Bot Delta de Notificações', status: 'ativo', token: 'token_delta_abc' },
        ];

        const MOCK_ADSETS_DATA = [
            { id: 'adset_1', name: 'Conjunto de Anúncios Verão 2025', status: 'ACTIVE', campaign_id: '1', objective: 'LEAD_GENERATION', spend: 350.50, impressions: 50000, clicks: 1200 },
            { id: 'adset_2', name: 'Conjunto de Anúncios Inverno 2025', status: 'PAUSED', campaign_id: '1', objective: 'PURCHASE', spend: 120.00, impressions: 15000, clicks: 300 },
            { id: 'adset_3', name: 'Conjunto de Anúncios Oferta Relâmpago', status: 'ACTIVE', campaign_id: '2', objective: 'CONVERSION', spend: 800.00, impressions: 80000, clicks: 2500 },
            { id: 'adset_4', name: 'Conjunto de Anúncios Produto Novo', status: 'ACTIVE', campaign_id: '3', objective: 'REACH', spend: 150.00, impressions: 100000, clicks: 500 },
            { id: 'adset_5', name: 'Conjunto de Anúncios Retargeting', status: 'ACTIVE', campaign_id: '1', objective: 'CONVERSION', spend: 250.00, impressions: 30000, clicks: 700 },
        ];

        const MOCK_ADS_DATA = [
            { id: 'ad_1', name: 'Criativo Carrossel Produto A', status: 'ACTIVE', adset_id: 'adset_1', preview_url: 'https://via.placeholder.com/150/FF5733/FFFFFF?text=Ad1', spend: 200.00, impressions: 25000, clicks: 500 },
            { id: 'ad_2', name: 'Criativo Vídeo Depoimento B', status: 'ACTIVE', adset_id: 'adset_1', preview_url: 'https://via.placeholder.com/150/33FF57/FFFFFF?text=Ad2', spend: 150.50, impressions: 25000, clicks: 700 },
            { id: 'ad_3', name: 'Criativo Imagem Única Desconto', status: 'ACTIVE', adset_id: 'adset_3', preview_url: 'https://via.placeholder.com/150/3357FF/FFFFFF?text=Ad3', spend: 400.00, impressions: 40000, clicks: 1200 },
            { id: 'ad_4', name: 'Criativo Story CTA', status: 'PAUSED', adset_id: 'adset_3', preview_url: 'https://via.placeholder.com/150/FFFF33/000000?text=Ad4', spend: 400.00, impressions: 40000, clicks: 1300 },
            { id: 'ad_5', name: 'Criativo Banner Lateral', status: 'ACTIVE', adset_id: 'adset_4', preview_url: 'https://via.placeholder.com/150/FF33FF/FFFFFF?text=Ad5', spend: 100.00, impressions: 60000, clicks: 300 },
            { id: 'ad_6', name: 'Criativo Retargeting Dinâmico', status: 'ACTIVE', adset_id: 'adset_5', preview_url: 'https://via.placeholder.com/150/33FFFF/000000?text=Ad6', spend: 150.00, impressions: 20000, clicks: 400 },
        ];


        // --- Componentes ---

        // Componente de Cabeçalho (Header)
        function Header({ onNavigate, currentPage, toggleDarkMode, isDarkMode }) {
            const [isSpinning, setIsSpinning] = useState(false);

            const handleToggleClick = () => {
                setIsSpinning(true);
                toggleDarkMode();
            };

            const handleAnimationEnd = () => {
                setIsSpinning(false);
            };

            return (
                <header className="bg-gray-800 dark:bg-gray-800 text-white p-4 shadow-md dark:shadow-lg dark:border-b dark:border-gray-700">
                    <div className="container mx-auto flex flex-wrap justify-between items-center">
                        <h1 className="text-2xl font-bold text-green-400">HotLead Dashboard</h1>
                        <nav className="mt-4 md:mt-0">
                            <ul className="flex flex-wrap space-x-2 md:space-x-6 justify-center">
                                <li><a href="#" onClick={() => onNavigate('dashboard')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'dashboard' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-chart-line mr-2"></i> Dashboard</a></li>
                                <li><a href="#" onClick={() => onNavigate('sales')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'sales' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-dollar-sign mr-2"></i> Vendas</a></li>
                                {/* === ATUALIZADO: MODELOS TROCA POR BOTS === */}
                                <li><a href="#" onClick={() => onNavigate('bots')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'bots' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-robot mr-2"></i> Bots</a></li>
                                {/* === REMOVIDO: CONQUISTAS ===
                                <li><a href="#" onClick={() => onNavigate('achievements')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'achievements' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-trophy mr-2"></i> Conquistas</a></li>
                                */}
                                <li><a href="#" onClick={() => onNavigate('integrations')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'integrations' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-plug mr-2"></i> Integrações</a></li>
                                <li><a href="#" onClick={() => onNavigate('create-checkout')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'create-checkout' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-plus-circle mr-2"></i> Criar Checkout</a></li>
                                <li><a href="#" onClick={() => onNavigate('campaigns')} className={`flex items-center px-3 py-2 rounded-md text-sm font-medium ${currentPage === 'campaigns' ? 'bg-green-600 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'}`}><i className="fas fa-bullhorn mr-2"></i> Campanhas</a></li>
                            </ul>
                        </nav>
                        <button
                            id="darkModeToggle"
                            onClick={handleToggleClick}
                            onAnimationEnd={handleAnimationEnd}
                            className={`ml-4 bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full transition-colors duration-300 ${isSpinning ? 'spin-active' : ''}`}
                        >
                            <i className={`fas ${isDarkMode ? 'fa-sun' : 'fa-moon'}`}></i>
                        </button>
                    </div>
                </header>
            );
        }

        // --- DASHBOARD Componente (1 - Atualizado) ---
        function Dashboard() {
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [salesData, setSalesData] = useState([]);
            const [campaignsData, setCampaignsData] = useState([]); // from CampaignPage's API logic

            const TOKEN = "EAAIyWkoZCTyQBPIZCw3jcdHSs3qmHVgHk0hOdxw6bzSpENbnRi2vAvHzIxMq89NEfcAxAmYMB6Ne4KqlCUg2cM9LZATk4zsKEgnIGZCdqKobJynkNp869tXKwmFxr03NVMjG7qavPuphYXuTbSBViU0dKf4Qgy9MfFIKkEhHvuGWmZBvqs9A1mb0rMZCVdv2NrQBqcYvFj4mSs3tl06f8t";
            const defaultAccountId = "507111372463621"; // Using a default account for dashboard metrics

            const fetchMetrics = useCallback(async (start, end) => {
                // Simulate fetching sales data
                const filteredSales = MOCK_SALES_DATA.filter(sale => {
                    const saleDate = new Date(sale.date);
                    const startObj = new Date(start);
                    const endObj = new Date(end);
                    return saleDate >= startObj && saleDate <= endObj;
                });
                setSalesData(filteredSales);

                // Re-use CampaignPage's fetch logic for spending
                try {
                    const urlInsights = new URL(`https://graph.facebook.com/v19.0/act_${defaultAccountId}/insights`);
                    urlInsights.searchParams.set("level", "account"); // Get account level insights
                    urlInsights.searchParams.set("fields", "spend");
                    urlInsights.searchParams.set("time_range", JSON.stringify({ since: start, until: end }));
                    urlInsights.searchParams.set("access_token", TOKEN);

                    const res = await fetch(urlInsights);
                    const data = await res.json();
                    if (data.error) throw new Error(`Erro ao buscar gastos: ${data.error.message}`);
                    setCampaignsData(data.data || []); // This will be total spending for the period
                } catch (e) {
                    console.error("Erro ao buscar gastos para o dashboard:", e);
                    setCampaignsData([]);
                }
            }, [TOKEN]);

            useEffect(() => {
                const today = new Date();
                const lastMonth = new Date(today);
                lastMonth.setDate(today.getDate() - 30); // Last 30 days

                const defaultEndDate = today.toISOString().slice(0, 10);
                const defaultStartDate = lastMonth.toISOString().slice(0, 10);

                setStartDate(defaultStartDate);
                setEndDate(defaultEndDate);
                fetchMetrics(defaultStartDate, defaultEndDate);
            }, [fetchMetrics]);

            const totalSales = salesData.reduce((sum, sale) => sum + sale.amount, 0);
            const totalSpending = campaignsData.reduce((sum, insight) => sum + parseFloat(insight.spend || 0), 0);
            const totalProfit = totalSales - totalSpending;

            // Group sales and spending by bot for per-bot metrics
            const botsMetrics = MOCK_BOTS_DATA.map(bot => {
                const botSales = salesData.filter(sale => sale.botId === bot.id);
                const botRevenue = botSales.reduce((sum, sale) => sum + sale.amount, 0);
                // For simplicity, attributing 50% of total spending to each active bot for mock
                // In reality, this would require campaign data linked to specific bots.
                const botSpending = bot.status === 'ativo' ? totalSpending / MOCK_BOTS_DATA.filter(b => b.status === 'ativo').length : 0;
                const botProfit = botRevenue - botSpending;
                return { ...bot, revenue: botRevenue, spending: botSpending, profit: botProfit };
            });

            return (
                <div className="bg-gray-700 dark:bg-gray-800 p-8 rounded-lg shadow-xl text-gray-100 mb-8">
                    <h2 className="text-3xl font-extrabold text-green-400 mb-6 text-center">Dashboard Principal</h2>

                    {/* Filters for Dashboard */}
                    <div className="flex flex-wrap items-center justify-center gap-6 mb-8 p-4 bg-gray-700 rounded-md">
                        <div className="flex flex-col">
                            <label htmlFor="dashboardStartDate" className="text-gray-300 text-sm font-medium mb-1">Data Início:</label>
                            <input
                                type="date"
                                id="dashboardStartDate"
                                value={startDate}
                                onChange={(e) => setStartDate(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            />
                        </div>
                        <div className="flex flex-col">
                            <label htmlFor="dashboardEndDate" className="text-gray-300 text-sm font-medium mb-1">Data Fim:</label>
                            <input
                                type="date"
                                id="dashboardEndDate"
                                value={endDate}
                                onChange={(e) => setEndDate(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            />
                        </div>
                        <button
                            onClick={() => fetchMetrics(startDate, endDate)}
                            className="bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-2.5 px-6 rounded-md shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center group"
                        >
                            <i className="fas fa-sync-alt mr-2 rotate-on-hover"></i>
                            Atualizar
                        </button>
                    </div>

                    {/* Summary Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg flex flex-col items-center justify-center text-center">
                            <i className="fas fa-dollar-sign text-5xl text-blue-400 mb-3"></i>
                            <h3 className="text-xl font-bold mb-2">Vendas Totais</h3>
                            <p className="text-gray-300 text-2xl font-semibold">{formatCurrency(totalSales)}</p>
                        </div>
                        <div className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg flex flex-col items-center justify-center text-center">
                            <i className="fas fa-hand-holding-usd text-5xl text-red-400 mb-3"></i>
                            <h3 className="text-xl font-bold mb-2">Gastos Totais</h3>
                            <p className="text-gray-300 text-2xl font-semibold">{formatCurrency(totalSpending)}</p>
                        </div>
                        <div className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg flex flex-col items-center justify-center text-center">
                            <i className="fas fa-coins text-5xl text-green-400 mb-3"></i>
                            <h3 className="text-xl font-bold mb-2">Lucro Total</h3>
                            <p className="text-gray-300 text-2xl font-semibold">{formatCurrency(totalProfit)}</p>
                        </div>
                    </div>

                    {/* Bots Ativos Section */}
                    <h3 className="text-2xl font-bold text-blue-300 mb-4">Bots Ativos e Métricas</h3>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {botsMetrics.map(bot => (
                            <div key={bot.id} className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg border border-gray-500">
                                <h4 className="text-xl font-semibold mb-2 text-white">{bot.name} ({bot.status === 'ativo' ? 'Ativo' : 'Inativo'})</h4>
                                <div className="grid grid-cols-2 gap-y-2 text-gray-300">
                                    <p><strong>Faturamento:</strong> <span className="text-green-300">{formatCurrency(bot.revenue)}</span></p>
                                    <p><strong>Gastos:</strong> <span className="text-red-300">{formatCurrency(bot.spending)}</span></p>
                                    <p><strong>Lucro:</strong> <span className={`${bot.profit >= 0 ? 'text-green-400' : 'text-red-400'} font-bold`}>{formatCurrency(bot.profit)}</span></p>
                                    <p><strong>Vendas:</strong> <span className="text-blue-300">{salesData.filter(s => s.botId === bot.id).length}</span></p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // --- VENDAS Componente (2 - Novo/Atualizado) ---
        function SalesPage() {
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [filteredSales, setFilteredSales] = useState([]);
            const [selectedBot, setSelectedBot] = useState('all'); // 'all' or botId

            useEffect(() => {
                const today = new Date();
                const lastMonth = new Date(today);
                lastMonth.setDate(today.getDate() - 30);

                const defaultEndDate = today.toISOString().slice(0, 10);
                const defaultStartDate = lastMonth.toISOString().slice(0, 10);

                setStartDate(defaultStartDate);
                setEndDate(defaultEndDate);
                applyFilters(defaultStartDate, defaultEndDate, 'all');
            }, []);

            const applyFilters = (start, end, bot) => {
                const startObj = new Date(start + 'T00:00:00Z'); // Add time to ensure date comparison works correctly
                const endObj = new Date(end + 'T23:59:59Z');

                const results = MOCK_SALES_DATA.filter(sale => {
                    const saleDate = new Date(sale.date);
                    const isInDateRange = saleDate >= startObj && saleDate <= endObj;
                    const matchesBot = bot === 'all' || sale.botId === bot;
                    return isInDateRange && matchesBot;
                });
                setFilteredSales(results.sort((a,b) => new Date(b.date) - new Date(a.date))); // Sort by date desc
            };

            const handleFilterChange = () => {
                applyFilters(startDate, endDate, selectedBot);
            };

            const totalPixGenerated = filteredSales.filter(s => s.pixStatus === 'generated').length;
            const totalPixPaid = filteredSales.filter(s => s.pixStatus === 'paid').length;
            const totalAmountPaid = filteredSales.filter(s => s.pixStatus === 'paid').reduce((sum, s) => sum + s.amount, 0);

            return (
                <div className="bg-gray-700 dark:bg-gray-800 p-8 rounded-lg shadow-xl text-gray-100 mb-8">
                    <h2 className="text-3xl font-extrabold text-green-400 mb-6 text-center">Relatório de Vendas</h2>

                    {/* Filters */}
                    <div className="flex flex-wrap items-center justify-center gap-6 mb-8 p-4 bg-gray-700 rounded-md">
                        <div className="flex flex-col">
                            <label htmlFor="salesStartDate" className="text-gray-300 text-sm font-medium mb-1">Data Início:</label>
                            <input
                                type="date"
                                id="salesStartDate"
                                value={startDate}
                                onChange={(e) => setStartDate(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            />
                        </div>
                        <div className="flex flex-col">
                            <label htmlFor="salesEndDate" className="text-gray-300 text-sm font-medium mb-1">Data Fim:</label>
                            <input
                                type="date"
                                id="salesEndDate"
                                value={endDate}
                                onChange={(e) => setEndDate(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            />
                        </div>
                        <div className="flex flex-col">
                            <label htmlFor="botSelect" className="text-gray-300 text-sm font-medium mb-1">Filtrar por Bot:</label>
                            <select
                                id="botSelect"
                                value={selectedBot}
                                onChange={(e) => setSelectedBot(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            >
                                <option value="all">Todos os Bots</option>
                                {MOCK_BOTS_DATA.map(bot => (
                                    <option key={bot.id} value={bot.id}>{bot.name}</option>
                                ))}
                            </select>
                        </div>
                        <button
                            onClick={handleFilterChange}
                            className="bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-2.5 px-6 rounded-md shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center group"
                        >
                            <i className="fas fa-filter mr-2 rotate-on-hover"></i>
                            Aplicar Filtros
                        </button>
                    </div>

                    {/* Sales Summary */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-center">
                        <div className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg">
                            <h3 className="text-xl font-bold mb-2 text-blue-300">PIX Gerados</h3>
                            <p className="text-white text-3xl font-semibold">{totalPixGenerated}</p>
                        </div>
                        <div className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg">
                            <h3 className="text-xl font-bold mb-2 text-green-300">PIX Pagos</h3>
                            <p className="text-white text-3xl font-semibold">{totalPixPaid}</p>
                        </div>
                        <div className="bg-gray-600 dark:bg-gray-700 p-5 rounded-md shadow-lg">
                            <h3 className="text-xl font-bold mb-2 text-purple-300">Valor Total Pago</h3>
                            <p className="text-white text-3xl font-semibold">{formatCurrency(totalAmountPaid)}</p>
                        </div>
                    </div>

                    {/* Sales List */}
                    <h3 className="text-2xl font-bold text-blue-300 mb-4">Detalhes das Vendas ({filteredSales.length} resultados)</h3>
                    <div className="table-container bg-gray-600 dark:bg-gray-700 rounded-lg shadow-md overflow-hidden">
                        {filteredSales.length === 0 ? (
                            <p className="p-4 text-center text-gray-300">Nenhuma venda encontrada para os filtros selecionados.</p>
                        ) : (
                            <table className="custom-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Data</th>
                                        <th>Produto</th>
                                        <th>Cliente</th>
                                        <th>Bot</th>
                                        <th>Valor</th>
                                        <th>Status PIX</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {filteredSales.map(sale => (
                                        <tr key={sale.id}>
                                            <td className="truncate-text max-w-[80px]">{sale.id}</td>
                                            <td>{formatDate(sale.date)}</td>
                                            <td className="truncate-text max-w-[150px]">{sale.product}</td>
                                            <td className="truncate-text max-w-[150px]">{sale.customer}</td>
                                            <td>{MOCK_BOTS_DATA.find(b => b.id === sale.botId)?.name || sale.botId}</td>
                                            <td>{formatCurrency(sale.amount)}</td>
                                            <td>
                                                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${sale.pixStatus === 'paid' ? 'bg-green-500 text-gray-900' : 'bg-orange-500 text-gray-900'}`}>
                                                    {sale.pixStatus === 'paid' ? 'Pago' : 'Gerado'}
                                                </span>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        )}
                    </div>
                </div>
            );
        }

        // --- BOTS Componente (3 - Antigo Modelos, agora Bots) ---
        function BotsPage() {
            const [bots, setBots] = useState(MOCK_BOTS_DATA);
            const [newBotName, setNewBotName] = useState('');
            const [newBotToken, setNewBotToken] = useState('');

            // Recalcula métricas dos bots sempre que houver mudança nos dados simulados
            const botsWithMetrics = bots.map(bot => {
                const botSales = MOCK_SALES_DATA.filter(sale => sale.botId === bot.id);
                const botRevenue = botSales.reduce((sum, sale) => sum + sale.amount, 0);

                // Para gastos do bot, é uma simulação. Em produção, você associaria campanhas a bots.
                // Aqui, vamos fazer uma atribuição simples para demonstração.
                const simulatedBotSpending = MOCK_ADSETS_DATA.filter(adset =>
                    // Simulate linking adsets to bots (e.g., if adset name contains bot name)
                    adset.name.toLowerCase().includes(bot.name.split(' ')[1].toLowerCase())
                ).reduce((sum, adset) => sum + adset.spend, 0);

                const botProfit = botRevenue - simulatedBotSpending;
                return { ...bot, revenue: botRevenue, spending: simulatedBotSpending, profit: botProfit };
            });

            const handleAddBot = (e) => {
                e.preventDefault();
                if (newBotName.trim() === '' || newBotToken.trim() === '') {
                    alert('Nome e Token do bot são obrigatórios!');
                    return;
                }
                const newBot = {
                    id: `bot_${Date.now()}`, // Simple unique ID
                    name: newBotName.trim(),
                    status: 'ativo', // New bots are active by default
                    token: newBotToken.trim()
                };
                setBots([...bots, newBot]); // Add to local state (not persistent for mock)
                setNewBotName('');
                setNewBotToken('');
                alert('Novo bot adicionado (apenas na sessão atual)!');
            };

            return (
                <div className="bg-gray-700 dark:bg-gray-800 p-8 rounded-lg shadow-xl text-gray-100 mb-8">
                    <h2 className="text-3xl font-extrabold text-green-400 mb-6 text-center">Gestão de Bots</h2>

                    {/* Add New Bot Form */}
                    <div className="mb-8 p-6 bg-gray-600 dark:bg-gray-700 rounded-md shadow-inner">
                        <h3 className="text-xl font-bold text-blue-300 mb-4">Adicionar Novo Bot</h3>
                        <form onSubmit={handleAddBot} className="flex flex-col md:flex-row gap-4">
                            <input
                                type="text"
                                placeholder="Nome do Bot (Ex: Bot Lançamento X)"
                                value={newBotName}
                                onChange={(e) => setNewBotName(e.target.value)}
                                className="flex-grow bg-gray-500 border border-gray-400 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                required
                            />
                            <input
                                type="text"
                                placeholder="Token do Bot (Ex: 123ABC_bot_token)"
                                value={newBotToken}
                                onChange={(e) => setNewBotToken(e.target.value)}
                                className="flex-grow bg-gray-500 border border-gray-400 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                required
                            />
                            <button
                                type="submit"
                                className="bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-2 px-6 rounded-md shadow-md transition-all duration-300 transform hover:scale-105"
                            >
                                <i className="fas fa-plus mr-2"></i> Adicionar Bot
                            </button>
                        </form>
                    </div>

                    {/* Bots List */}
                    <h3 className="text-2xl font-bold text-blue-300 mb-4">Bots Ativos e Inativos ({bots.length})</h3>
                    <div className="table-container bg-gray-600 dark:bg-gray-700 rounded-lg shadow-md overflow-hidden">
                        <table className="custom-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>ID</th>
                                    <th>Status</th>
                                    <th>Faturamento</th>
                                    <th>Gastos</th>
                                    <th>Lucro</th>
                                </tr>
                            </thead>
                            <tbody>
                                {botsWithMetrics.map(bot => (
                                    <tr key={bot.id}>
                                        <td className="truncate-text max-w-[180px]">{bot.name}</td>
                                        <td className="truncate-text max-w-[120px]">{bot.id}</td>
                                        <td>
                                            <span className={`px-2 py-1 rounded-full text-xs font-semibold ${bot.status === 'ativo' ? 'bg-green-500 text-gray-900' : 'bg-red-500 text-white'}`}>
                                                {bot.status === 'ativo' ? 'Ativo' : 'Inativo'}
                                            </span>
                                        </td>
                                        <td>{formatCurrency(bot.revenue)}</td>
                                        <td>{formatCurrency(bot.spending)}</td>
                                        <td><span className={`${bot.profit >= 0 ? 'text-green-400' : 'text-red-400'} font-bold`}>{formatCurrency(bot.profit)}</span></td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        }

        // --- INTEGRAÇÕES Componente (5 - Atualizado) ---
        function IntegrationsPage() {
            const [pixelId, setPixelId] = useState('');
            const [adsAccountConnected, setAdsAccountConnected] = useState(false); // Simulate connection status

            const handleSavePixel = (e) => {
                e.preventDefault();
                alert(`Pixel ID ${pixelId} salvo (apenas UI)! Em um sistema real, isso seria enviado para o backend.`);
                // Here you would typically send pixelId to your backend
            };

            const handleConnectAdsAccount = () => {
                // IMPORTANT: This is a UI placeholder.
                // Connecting a Meta Ads account securely involves OAuth 2.0 (e.g., Facebook Login for Business)
                // where the user grants permissions and you receive an access token on your backend.
                // It CANNOT be done purely in frontend HTML/JS due to security implications and complexity.
                alert('Iniciando conexão da Conta de Anúncios Meta Ads (simulação). Isso exigiria um fluxo OAuth completo com um backend.');
                setAdsAccountConnected(true); // Simulate success for UI
            };

            return (
                <div className="bg-gray-700 dark:bg-gray-800 p-8 rounded-lg shadow-xl text-gray-100 mb-8">
                    <h2 className="text-3xl font-extrabold text-green-400 mb-6 text-center">Integrações de Marketing</h2>

                    {/* Meta Pixel Setup */}
                    <div className="mb-8 p-6 bg-gray-600 dark:bg-gray-700 rounded-md shadow-inner">
                        <h3 className="text-xl font-bold text-blue-300 mb-4 flex items-center"><i className="fab fa-facebook-f mr-3 text-2xl"></i> Configuração do Pixel Meta</h3>
                        <form onSubmit={handleSavePixel} className="flex flex-col md:flex-row gap-4 items-end">
                            <div className="flex-grow flex flex-col">
                                <label htmlFor="pixelId" className="text-gray-300 text-sm font-medium mb-1">ID do Pixel Meta:</label>
                                <input
                                    type="text"
                                    id="pixelId"
                                    placeholder="Ex: 1234567890"
                                    value={pixelId}
                                    onChange={(e) => setPixelId(e.target.value)}
                                    className="bg-gray-500 border border-gray-400 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                />
                            </div>
                            <button
                                type="submit"
                                className="bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-2 px-6 rounded-md shadow-md transition-all duration-300 transform hover:scale-105"
                            >
                                <i className="fas fa-save mr-2"></i> Salvar Pixel
                            </button>
                        </form>
                    </div>

                    {/* Meta Ads Account Consent */}
                    <div className="p-6 bg-gray-600 dark:bg-gray-700 rounded-md shadow-inner">
                        <h3 className="text-xl font-bold text-blue-300 mb-4 flex items-center"><i className="fab fa-facebook-square mr-3 text-2xl"></i> Conectar Conta de Anúncios Meta</h3>
                        <p className="text-gray-300 mb-4">
                            Para puxar as métricas de suas campanhas e anúncios, precisamos da sua permissão para acessar sua conta de anúncios Meta.
                            **Atenção: A conexão real envolve um fluxo de autenticação seguro (OAuth) entre o seu servidor e a Meta. Este é apenas um placeholder de UI.**
                        </p>
                        {adsAccountConnected ? (
                            <div className="flex items-center text-green-400 text-lg font-semibold">
                                <i className="fas fa-check-circle mr-3"></i> Conta de Anúncios Conectada!
                            </div>
                        ) : (
                            <button
                                onClick={handleConnectAdsAccount}
                                className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-md shadow-md transition-all duration-300 transform hover:scale-105"
                            >
                                <i className="fas fa-link mr-2"></i> Conectar Conta Meta Ads
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        // --- CRIAR CHECKOUT (6 - Mantido) ---
        function CreateCheckout() {
            return (
                <div className="bg-gray-700 dark:bg-gray-800 p-8 rounded-lg shadow-xl text-gray-100 mb-8">
                    <h2 className="text-3xl font-extrabold text-green-400 mb-6 text-center">Página de Criar Checkout</h2>
                    <p className="text-gray-300 text-center">Aqui você poderá configurar e criar novos checkouts para seus produtos.</p>
                    <p className="text-gray-400 text-center mt-4">Funcionalidade a ser desenvolvida.</p>
                </div>
            );
        }

        // --- CAMPANHAS Componente (7 - Atualizado com Tabs e Drill-down) ---
        function CampaignsPage() {
            const [campaigns, setCampaigns] = useState([]);
            const [adsets, setAdsets] = useState([]);
            const [ads, setAds] = useState([]);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            const [accountId, setAccountId] = useState("507111372463621"); // Default to Conta 1
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [activeTab, setActiveTab] = useState('campaigns'); // 'campaigns', 'adsets', 'ads'
            const [selectedCampaignId, setSelectedCampaignId] = useState(null); // New state for selected campaign

            // **ATENÇÃO: MANTER ESTE TOKEN NO CLIENTE NÃO É SEGURO PARA PRODUÇÃO.**
            const TOKEN = "EAAIyWkoZCTyQBPIZCw3jcdHSs3qmHVgHk0hOdxw6bzSpENbnRi2vAvHzIxMq89NEfcAxAmYMB6Ne4KqlCUg2cM9LZATk4zsKEgnIGZCdqKobJynkNp869tXKwmFxr03NVMjG7qavPuphYXuTbSBViU0dKf4Qgy9MfFIKkEhHvuGWmZBvqs9A1mb0rMZCVdv2NrQBqcYvFj4mSs3tl06f8t";

            const contas = [
                { id: "507111372463621", name: "Conta 1" },
                { id: "1421566932486575", name: "Conta 2" },
                { id: "1767547067979139", name: "Conta 3" },
                { id: "1073555467565665", name: "Conta 4" },
                { id: "735462832220538", name: "Conta 5" },
            ];

            const renderStatus = useCallback((status) => {
                if (!status) return null;
                status = status.toLowerCase();
                let colorClass = '';
                if (status.includes("active")) colorClass = 'bg-green-500 text-gray-900';
                else if (status.includes("paused")) colorClass = 'bg-orange-500 text-gray-900';
                else if (status.includes("inactive") || status.includes("archived") || status.includes("completed") || status.includes("deleted")) colorClass = 'bg-red-500 text-white';
                return (
                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${colorClass}`}>
                        {status.replace(/_/g, ' ')}
                    </span>
                );
            }, []);

            const renderActions = useCallback((actions) => {
                if (!actions || !actions.length) return <p className="text-gray-400 text-sm italic">Sem ações registradas</p>;
                const labels = {
                    "link_click": "Cliques em Links", "post_engagement": "Engajamento Post", "page_engagement": "Engajamento Página",
                    "lead": "Leads", "purchase": "Compras", "view_content": "Visualizações", "add_to_cart": "Add Carrinho",
                    "initiate_checkout": "Início Checkout"
                };
                return (
                    <div className="mt-3 pt-3 border-t border-gray-700">
                        <p className="font-semibold text-gray-300 mb-2">Ações:</p>
                        {actions.map((a, index) => (
                            <p key={index} className="text-sm text-gray-400 flex items-center mb-1">
                                <i className="fas fa-dot-circle text-green-500 mr-2"></i>
                                {labels[a.action_type] || a.action_type}: <strong className="ml-1 text-gray-200">{a.value}</strong>
                            </p>
                        ))}
                    </div>
                );
            }, []);


            const fetchCampaignsData = useCallback(async (currentAccountId, since, until) => {
                setLoading(true);
                setError(null);
                try {
                    // Fetch Campaigns and their insights
                    const urlCampaigns = new URL(`https://graph.facebook.com/v19.0/act_${currentAccountId}/campaigns`);
                    urlCampaigns.searchParams.set("fields", "id,name,status,effective_status,start_time,stop_time");
                    urlCampaigns.searchParams.set("limit", "200");
                    urlCampaigns.searchParams.set("access_token", TOKEN);

                    const urlInsights = new URL(`https://graph.facebook.com/v19.0/act_${currentAccountId}/insights`);
                    urlInsights.searchParams.set("level", "campaign");
                    urlInsights.searchParams.set("fields", "campaign_id,impressions,clicks,spend,actions,ctr,cpc,cpm");
                    urlInsights.searchParams.set("time_range", JSON.stringify({ since, until }));
                    urlInsights.searchParams.set("limit", "500");
                    urlInsights.searchParams.set("access_token", TOKEN);

                    const [campRes, insightsRes] = await Promise.all([
                        fetch(urlCampaigns),
                        fetch(urlInsights)
                    ]);

                    const campData = await campRes.json();
                    const insightsData = await insightsRes.json();

                    if (campData.error) throw new Error(`API Campanhas: ${campData.error.message}`);
                    if (insightsData.error) throw new Error(`API Insights: ${insightsData.error.message}`);

                    const insightsMap = {};
                    (insightsData.data || []).forEach(i => {
                        insightsMap[i.campaign_id] = i;
                    });

                    const combinedCampaigns = (campData.data || []).map(camp => ({
                        ...camp,
                        insights: insightsMap[camp.id] || {}
                    }));
                    setCampaigns(combinedCampaigns);

                    // --- SIMULAÇÃO: Fetch Ad Sets e Ads ---
                    // Em um ambiente real, você faria chamadas API similares para adsets e ads,
                    // mas a API do Meta Ads tem limites e a estrutura das chamadas é mais complexa.
                    // Estou usando dados mockados para 'adsets' e 'ads' por simplificação aqui.
                    const simulatedAdsets = MOCK_ADSETS_DATA.map(adset => ({
                        ...adset,
                        insights: MOCK_ADSETS_DATA.find(i => i.id === adset.id) || {} // Simplified insight mapping
                    }));
                    setAdsets(simulatedAdsets);

                    const simulatedAds = MOCK_ADS_DATA.map(ad => ({
                        ...ad,
                        insights: MOCK_ADS_DATA.find(i => i.id === ad.id) || {} // Simplified insight mapping
                    }));
                    setAds(simulatedAds);

                } catch (err) {
                    setError(err.message);
                    console.error("Erro ao carregar dados de campanhas/adsets/ads:", err);
                } finally {
                    setLoading(false);
                }
            }, [TOKEN]);

            useEffect(() => {
                const today = new Date();
                const lastWeek = new Date(today);
                lastWeek.setDate(today.getDate() - 7);

                const defaultEndDate = today.toISOString().slice(0, 10);
                const defaultStartDate = lastWeek.toISOString().slice(0, 10);

                setStartDate(defaultStartDate);
                setEndDate(defaultEndDate);
                fetchCampaignsData(accountId, defaultStartDate, defaultEndDate);
            }, [accountId, fetchCampaignsData]);

            const handleRefresh = () => {
                if (!accountId || !startDate || !endDate) {
                    alert("Por favor, selecione a conta e as datas.");
                    return;
                }
                fetchCampaignsData(accountId, startDate, endDate);
                setSelectedCampaignId(null); // Reset selection on refresh
            };

            const handleCampaignClick = (campaignId) => {
                setSelectedCampaignId(campaignId);
                setActiveTab('adsets'); // Switch to adsets tab when a campaign is clicked
            };

            const handleBackToCampaigns = () => {
                setSelectedCampaignId(null);
                setActiveTab('campaigns'); // Go back to campaigns tab
            };

            const renderDataCards = (data, type, onClickHandler = null) => {
                let filteredData = data;
                if (selectedCampaignId && type !== 'Campanha') {
                    // Filter adsets/ads by selected campaign
                    if (type === 'Conjunto de Anúncios') {
                        filteredData = data.filter(item => item.campaign_id === selectedCampaignId);
                    } else if (type === 'Criativo') {
                        // For creatives, filter by adsets that belong to the selected campaign
                        const adsetsInSelectedCampaign = adsets.filter(adset => adset.campaign_id === selectedCampaignId).map(adset => adset.id);
                        filteredData = data.filter(item => adsetsInSelectedCampaign.includes(item.adset_id));
                    }
                } else if (selectedCampaignId && type === 'Campanha') {
                    // If a campaign is selected, only show that campaign
                    filteredData = data.filter(item => item.id === selectedCampaignId);
                }


                if (filteredData.length === 0) {
                    return <p className="text-center text-gray-400 py-8">Nenhum {type} encontrado(a) para os filtros selecionados.</p>;
                }

                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {filteredData.map(item => (
                            <div
                                key={item.id}
                                className={`bg-gray-700 rounded-lg shadow-md p-5 border transition-transform duration-300 ${onClickHandler ? 'cursor-pointer hover:scale-105 hover:shadow-xl' : ''} ${selectedCampaignId === item.id ? 'border-green-500 ring-2 ring-green-500' : 'border-gray-600'}`}
                                onClick={onClickHandler ? () => onClickHandler(item.id) : null}
                            >
                                <h3 className="text-xl font-semibold text-blue-300 mb-2 truncate-text">{item.name || item.id}</h3>
                                {item.status && <div className="mb-3 flex flex-wrap gap-2">{renderStatus(item.status)} {item.effective_status && item.status !== item.effective_status && renderStatus(item.effective_status)}</div>}
                                <p className="text-sm text-gray-300 mb-1"><strong>ID:</strong> <span className="text-gray-200">{item.id}</span></p>
                                {item.start_time && <p className="text-sm text-gray-300 mb-1"><strong>Início:</strong> <span className="text-gray-200">{formatDate(item.start_time)}</span></p>}
                                {item.stop_time && <p className="text-sm text-gray-300 mb-3"><strong>Fim:</strong> <span className="text-gray-200">{item.stop_time ? formatDate(item.stop_time) : 'Em aberto'}</span></p>}
                                {item.objective && <p className="text-sm text-gray-300 mb-1"><strong>Objetivo:</strong> <span className="text-gray-200">{item.objective.replace(/_/g, ' ')}</span></p>}
                                {item.campaign_id && type !== 'Campanha' && (
                                    <p className="text-sm text-gray-300 mb-1">
                                        <strong>Campanha:</strong> <span className="text-gray-200">{campaigns.find(c => c.id === item.campaign_id)?.name || item.campaign_id}</span>
                                    </p>
                                )}
                                {item.adset_id && type === 'Criativo' && (
                                    <p className="text-sm text-gray-300 mb-1">
                                        <strong>Conjunto de Anúncios:</strong> <span className="text-gray-200">{adsets.find(a => a.id === item.adset_id)?.name || item.adset_id}</span>
                                    </p>
                                )}
                                {item.preview_url && (
                                    <div className="mb-3">
                                        <p className="text-sm text-gray-300 mb-1"><strong>Prévia:</strong></p>
                                        <img src={item.preview_url} alt="Creative Preview" className="w-full h-auto max-h-48 object-cover rounded-md mt-2" />
                                        <a href={item.preview_url} target="_blank" rel="noopener noreferrer" className="text-blue-400 text-sm hover:underline mt-1 block">Ver Imagem/Vídeo</a>
                                    </div>
                                )}


                                <div className="mt-4 pt-4 border-t border-gray-600">
                                    <h4 className="font-bold text-lg text-green-400 mb-2">Métricas ({formatDate(startDate)} - {formatDate(endDate)})</h4>
                                    <p className="text-gray-300 text-base mb-1"><strong>Gastos:</strong> <span className="text-red-300 font-semibold">{formatCurrency(item.insights.spend || 0)}</span></p>
                                    <p className="text-gray-300 text-base mb-1"><strong>Cliques:</strong> <span className="text-blue-300 font-semibold">{item.insights.clicks || 0}</span></p>
                                    <p className="text-gray-300 text-base mb-1"><strong>Impressões:</strong> <span className="text-purple-300 font-semibold">{item.insights.impressions || 0}</span></p>
                                    <p className="text-gray-300 text-base mb-1"><strong>CTR:</strong> <span className="text-orange-300 font-semibold">{(parseFloat(item.insights.ctr || 0)).toFixed(2)}%</span></p>
                                    <p className="text-gray-300 text-base mb-1"><strong>CPC:</strong> <span className="text-cyan-300 font-semibold">{formatCurrency(item.insights.cpc || 0)}</span></p>
                                    <p className="text-gray-300 text-base mb-1"><strong>CPM:</strong> <span className="text-pink-300 font-semibold">{formatCurrency(item.insights.cpm || 0)}</span></p>
                                    {renderActions(item.insights.actions)}
                                </div>
                            </div>
                        ))}
                    </div>
                );
            };

            return (
                <div className="bg-gray-700 dark:bg-gray-800 p-8 rounded-lg shadow-xl text-gray-100 mb-8">
                    <h2 className="text-3xl font-extrabold text-green-400 mb-6 text-center">Gestão de Campanhas Meta Ads</h2>

                    {/* Filters and Account Selection */}
                    <div className="flex flex-wrap items-center justify-center gap-6 mb-8 p-4 bg-gray-700 rounded-md">
                        <div className="flex flex-col">
                            <label htmlFor="accountSelect" className="text-gray-300 text-sm font-medium mb-1">Conta de Anúncio:</label>
                            <select
                                id="accountSelect"
                                value={accountId}
                                onChange={(e) => setAccountId(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            >
                                {contas.map(conta => (
                                    <option key={conta.id} value={conta.id}>
                                        {conta.name} (ID: {conta.id})
                                    </option>
                                ))}
                            </select>
                        </div>
                        <div className="flex flex-col">
                            <label htmlFor="startDate" className="text-gray-300 text-sm font-medium mb-1">Data Início:</label>
                            <input
                                type="date"
                                id="startDate"
                                value={startDate}
                                onChange={(e) => setStartDate(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            />
                        </div>
                        <div className="flex flex-col">
                            <label htmlFor="endDate" className="text-gray-300 text-sm font-medium mb-1">Data Fim:</label>
                            <input
                                type="date"
                                id="endDate"
                                value={endDate}
                                onChange={(e) => setEndDate(e.target.value)}
                                className="bg-gray-600 border border-gray-500 text-white py-2 px-3 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 cursor-pointer"
                            />
                        </div>
                        <button
                            onClick={handleRefresh}
                            className="bg-green-500 hover:bg-green-600 text-gray-900 font-bold py-2.5 px-6 rounded-md shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center group"
                        >
                            <i className="fas fa-sync-alt mr-2 rotate-on-hover"></i>
                            Atualizar Dados
                        </button>
                    </div>

                    {/* Back button when a campaign is selected */}
                    {selectedCampaignId && (
                        <div className="mb-6">
                            <button
                                onClick={handleBackToCampaigns}
                                className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition-all duration-300 transform hover:scale-105 flex items-center"
                            >
                                <i className="fas fa-arrow-left mr-2"></i> Voltar para Campanhas
                            </button>
                        </div>
                    )}


                    {/* Tabs for Campaigns, Ad Sets, Ads */}
                    <div className="flex justify-center mb-8 bg-gray-700 p-2 rounded-lg shadow-inner">
                        <button
                            onClick={() => setActiveTab('campaigns')}
                            className={`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all duration-300 ${activeTab === 'campaigns' ? 'bg-green-600 text-white shadow-md' : 'text-gray-300 hover:bg-gray-600 hover:text-white'}`}
                        >
                            <i className="fas fa-bullhorn mr-2"></i> Campanhas
                        </button>
                        <button
                            onClick={() => setActiveTab('adsets')}
                            className={`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all duration-300 ${activeTab === 'adsets' ? 'bg-green-600 text-white shadow-md' : 'text-gray-300 hover:bg-gray-600 hover:text-white'}`}
                        >
                            <i className="fas fa-layer-group mr-2"></i> Conjuntos de Anúncios
                        </button>
                        <button
                            onClick={() => setActiveTab('ads')}
                            className={`flex-1 py-3 px-4 rounded-md text-sm font-medium transition-all duration-300 ${activeTab === 'ads' ? 'bg-green-600 text-white shadow-md' : 'text-gray-300 hover:bg-gray-600 hover:text-white'}`}
                        >
                            <i className="fas fa-ad mr-2"></i> Criativos
                        </button>
                    </div>

                    {loading && (
                        <div className="text-center py-10">
                            <i className="fas fa-spinner fa-spin text-green-400 text-4xl mb-4"></i>
                            <p className="text-gray-300 text-lg">Carregando dados da Meta Ads...</p>
                        </div>
                    )}
                    {error && (
                        <div className="bg-red-800 text-red-100 p-4 rounded-md text-center">
                            <i className="fas fa-exclamation-triangle mr-2"></i>
                            <p>Erro ao carregar dados: {error}</p>
                            <p className="text-sm mt-2">Verifique seu token de acesso, permissões ou a conexão de internet.</p>
                        </div>
                    )}

                    {!loading && !error && (
                        <div>
                            {activeTab === 'campaigns' && renderDataCards(campaigns, 'Campanha', handleCampaignClick)}
                            {activeTab === 'adsets' && renderDataCards(adsets, 'Conjunto de Anúncios')}
                            {activeTab === 'ads' && renderDataCards(ads, 'Criativo')}
                        </div>
                    )}
                </div>
            );
        }

        // --- Componente Principal da Aplicação ---
        function App() {
            const [currentPage, setCurrentPage] = useState('dashboard'); // Página inicial padrão
            const [isDarkMode, setIsDarkMode] = useState(false);

            useEffect(() => {
                // Carrega a preferência de tema do localStorage
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    setIsDarkMode(true);
                } else {
                    setIsDarkMode(false);
                }
            }, []);

            useEffect(() => {
                // Aplica a classe 'dark' ao <html> baseado no estado
                if (isDarkMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                // Salva a preferência no localStorage
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            }, [isDarkMode]);

            const toggleDarkMode = () => {
                setIsDarkMode(prevMode => !prevMode);
            };

            const navigateTo = (page) => {
                setCurrentPage(page);
            };

            return (
                <div className="min-h-screen bg-gray-100 font-sans dark:bg-gray-900 transition-colors duration-300">
                    <Header onNavigate={navigateTo} currentPage={currentPage} toggleDarkMode={toggleDarkMode} isDarkMode={isDarkMode} />
                    <main className="container mx-auto p-4">
                        {currentPage === 'dashboard' && <Dashboard />}
                        {currentPage === 'sales' && <SalesPage />} {/* Updated */}
                        {currentPage === 'bots' && <BotsPage />} {/* Updated: Renamed from Models */}
                        {/* achievements removed */}
                        {currentPage === 'integrations' && <IntegrationsPage />} {/* Updated */}
                        {currentPage === 'create-checkout' && <CreateCheckout />}
                        {currentPage === 'campaigns' && <CampaignsPage />} {/* Updated */}
                    </main>
                </div>
            );
        }

        // Renderiza o aplicativo React no elemento 'root' do HTML
        window.onload = function() {
            ReactDOM.createRoot(document.getElementById('root')).render(<App />);
        };

    </script>
</body>
</html>
```
