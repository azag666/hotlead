<!DOCTYPE html>
<html lang="pt-BR" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HotLead Dashboard - Profissional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Base styles */
        html, body, #root {
            height: 100%;
        }
        body {
            /* Tailwind classes applied via React component, this is fallback/initial */
            @apply bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-sans transition-colors duration-300;
        }
        .truncate-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #darkModeToggle.spin-active {
            animation: spin 0.5s forwards;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        /* Custom scrollbar for dark mode compatibility and aesthetics */
        /* For WebKit browsers (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #e0e0e0; /* Light mode track */
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #333; /* Dark mode track */
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #555;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
        /* Custom date input arrow color for dark mode */
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.8); /* Adjust for dark mode visibility */
        }
        .dark input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1); /* Ensure it's white in dark mode */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Global Constants (replace with your actual token and accounts) ---
        // ATENÇÃO: Substitua este TOKEN pelo seu token de acesso da API da Meta.
        // E configure suas contas de anúncio corretamente.
        const TOKEN = "EAAIyWkoZCTyQBPIZCw3jcdHSs3qmHVgHk0hOdxw6bzSpENbnRi2vAvHzIxMq89NEfcAxAmYMB6Ne4KqlCUg2cM9LZATk4zsKEgnIGZCdqKobJynkNp869tXKwmFxr03NVMjG7qavPuphYXuTbSBViU0dKf4Qgy9MfFIKkEhHvuGWmZBvqs9A1mb0rMZCVdv2NrQBqcYvFj4mSs3tl06f8t";
        const contas = [
            { id: "507111372463621", name: "Conta 1" },
            { id: "1421566932486575", name: "Conta 2" },
            { id: "1767547067979139", name: "Conta 3" },
            { id: "1073555467565665", name: "Conta 4" },
            { id: "735462832220538", name: "Conta 5" },
        ];

        // --- Helper Functions (Formatting) ---
        const formatCurrency = (value) => {
            const num = Number(value);
            if (isNaN(num)) return "R$ 0,00";
            return num.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
        };

        const formatDate = (dateStr) => {
            if (!dateStr) return "-";
            const d = new Date(dateStr);
            return d.toLocaleDateString("pt-BR");
        };

        const renderStatus = (status) => {
            if (!status) return "";
            status = status.toLowerCase();
            let cls = "";
            if (status.includes("active")) cls = "bg-green-500 text-white";
            else if (status.includes("paused")) cls = "bg-yellow-500 text-gray-900";
            else if (status.includes("inactive") || status.includes("archived") || status.includes("completed") || status.includes("deleted")) cls = "bg-red-500 text-white";
            else cls = "bg-gray-400 text-gray-900"; // Default
            return <span className={`px-2 py-1 rounded-md text-xs font-bold capitalize ${cls}`}>{status.replace(/_/g, ' ')}</span>;
        };

        const renderActions = (actions) => {
            if (!actions || !actions.length) return <em className="text-gray-400 text-sm">Sem ações registradas</em>;
            const labels = {
                "link_click": "Cliques em Links",
                "post_engagement": "Engajamento em Post",
                "page_engagement": "Engajamento na Página",
                "lead": "Leads",
                "purchase": "Compras",
                "view_content": "Visualizações",
                "add_to_cart": "Adicionados ao Carrinho",
                "initiate_checkout": "Inícios de Checkout"
            };
            return (
                <div className="text-sm">
                    {actions.map((a, index) => (
                        <p key={index} className="mb-1">• {labels[a.action_type] || a.action_type}: {a.value}</p>
                    ))}
                </div>
            );
        };

        // --- API Fetching Logic ---
        const fetchMetaAdsData = async (endpoint, accountId, params = {}) => {
            const url = new URL(`https://graph.facebook.com/v19.0/act_${accountId}/${endpoint}`);
            url.searchParams.set("access_token", TOKEN);
            for (const key in params) {
                url.searchParams.set(key, params[key]);
            }

            const response = await fetch(url);
            const data = await response.json();
            if (data.error) {
                console.error(`Error fetching from ${endpoint}:`, data.error);
                throw new Error(data.error.message);
            }
            return data.data || [];
        };

        const fetchCampaigns = async (accountId, since, until) => {
            const campaignsData = await fetchMetaAdsData("campaigns", accountId, {
                fields: "id,name,status,effective_status,start_time,stop_time",
                limit: "200"
            });

            const insightsData = await fetchMetaAdsData("insights", accountId, {
                level: "campaign",
                fields: "campaign_id,impressions,clicks,spend,actions,ctr,cpc,cpm",
                time_range: JSON.stringify({ since, until }),
                limit: "500"
            });

            const insightsMap = insightsData.reduce((acc, insight) => {
                acc[insight.campaign_id] = insight;
                return acc;
            }, {});

            return campaignsData.map(camp => ({
                ...camp,
                insights: insightsMap[camp.id] || {}
            }));
        };

        const fetchAdSets = async (accountId, since, until) => {
            const adsetsData = await fetchMetaAdsData("adsets", accountId, {
                fields: "id,name,status,daily_budget,start_time,end_time,campaign_id",
                limit: "200"
            });

            const insightsData = await fetchMetaAdsData("insights", accountId, {
                level: "adset",
                fields: "adset_id,impressions,clicks,spend,actions,ctr,cpc,cpm",
                time_range: JSON.stringify({ since, until }),
                limit: "500"
            });

            const insightsMap = insightsData.reduce((acc, insight) => {
                acc[insight.adset_id] = insight;
                return acc;
            }, {});

            return adsetsData.map(adset => ({
                ...adset,
                insights: insightsMap[adset.id] || {}
            }));
        };

        const fetchAds = async (accountId, since, until) => {
            const adsData = await fetchMetaAdsData("ads", accountId, {
                fields: "id,name,status,creative,adset_id",
                limit: "200"
            });

            const insightsData = await fetchMetaAdsData("insights", accountId, {
                level: "ad",
                fields: "ad_id,impressions,clicks,spend,actions,ctr,cpc,cpm",
                time_range: JSON.stringify({ since, until }),
                limit: "500"
            });

            const insightsMap = insightsData.reduce((acc, insight) => {
                acc[insight.ad_id] = insight;
                return acc;
            }, {});

            return adsData.map(ad => ({
                ...ad,
                insights: insightsMap[ad.id] || {},
                preview_url: ad.creative && ad.creative.thumbnail_url ? ad.creative.thumbnail_url : null
            }));
        };


        // --- CampaignsPage Component ---
        const CampaignsPage = () => {
            const [campaigns, setCampaigns] = useState([]);
            const [adSets, setAdSets] = useState([]);
            const [ads, setAds] = useState([]);
            const [selectedAccountId, setSelectedAccountId] = useState(contas[0].id);
            const [startDate, setStartDate] = useState('');
            const [endDate, setEndDate] = useState('');
            const [selectedCampaignId, setSelectedCampaignId] = useState(null);
            const [activeTab, setActiveTab] = useState('campaigns');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState(null);
            const [globalOverview, setGlobalOverview] = useState(null);

            // Set initial dates (last 7 days)
            useEffect(() => {
                const today = new Date();
                const lastWeek = new Date(today);
                lastWeek.setDate(today.getDate() - 7);
                setStartDate(lastWeek.toISOString().slice(0, 10));
                setEndDate(today.toISOString().slice(0, 10));
            }, []);

            // Fetch data for selected account and global overview
            const fetchData = async () => {
                setLoading(true);
                setError(null);
                try {
                    // Fetch global overview metrics
                    await fetchAndRenderGlobalOverview();

                    if (!selectedAccountId || !startDate || !endDate) {
                        setError("Selecione uma conta e o período para carregar os dados específicos.");
                        setCampaigns([]);
                        setAdSets([]);
                        setAds([]);
                        setLoading(false);
                        return;
                    }

                    const [campaignsData, adSetsData, adsData] = await Promise.all([
                        fetchCampaigns(selectedAccountId, startDate, endDate),
                        fetchAdSets(selectedAccountId, startDate, endDate),
                        fetchAds(selectedAccountId, startDate, endDate),
                    ]);

                    setCampaigns(campaignsData);
                    setAdSets(adSetsData);
                    setAds(adsData);

                } catch (err) {
                    setError(err.message || "Ocorreu um erro ao buscar os dados.");
                    setCampaigns([]);
                    setAdSets([]);
                    setAds([]);
                } finally {
                    setLoading(false);
                }
            };

            const fetchAndRenderGlobalOverview = async () => {
                setGlobalOverview({ message: "Carregando métricas globais..." });
                let totalSpend = 0;
                let totalImpressions = 0;
                let totalClicks = 0;
                let totalActions = {};

                if (!startDate || !endDate) {
                    setGlobalOverview({ error: "Selecione as datas para carregar a visão global." });
                    return;
                }

                try {
                    const fetchPromises = contas.map(conta => fetchCampaigns(conta.id, startDate, endDate));
                    const allAccountsCampaigns = await Promise.all(fetchPromises);

                    allAccountsCampaigns.forEach(campaignsList => {
                        campaignsList.forEach(campaign => {
                            const insights = campaign.insights || {};
                            totalSpend += parseFloat(insights.spend || 0);
                            totalImpressions += parseInt(insights.impressions || 0);
                            totalClicks += parseInt(insights.clicks || 0);

                            if (insights.actions) {
                                insights.actions.forEach(action => {
                                    if (totalActions[action.action_type]) {
                                        totalActions[action.action_type] += parseInt(action.value);
                                    } else {
                                        totalActions[action.action_type] = parseInt(action.value);
                                    }
                                });
                            }
                        });
                    });

                    setGlobalOverview({
                        totalSpend,
                        totalImpressions,
                        totalClicks,
                        totalActions
                    });

                } catch (err) {
                    setGlobalOverview({ error: `Erro ao carregar visão global: ${err.message}` });
                    console.error("Erro ao carregar visão global:", err);
                }
            };

            useEffect(() => {
                fetchData();
            }, [selectedAccountId, startDate, endDate]); // Re-fetch data when these change

            const handleRefresh = () => {
                setSelectedCampaignId(null); // Reset campaign filter on manual refresh
                fetchData();
            };

            const handleCampaignClick = (campaignId) => {
                setSelectedCampaignId(campaignId);
                setActiveTab('adsets');
            };

            const handleBackToCampaigns = () => {
                setSelectedCampaignId(null);
                setActiveTab('campaigns');
            };

            const renderGlobalOverview = () => {
                if (globalOverview === null) {
                    return <p className="text-center text-gray-400">Carregando métricas globais...</p>;
                }
                if (globalOverview.error) {
                    return <p className="text-center text-red-400">{globalOverview.error}</p>;
                }
                if (globalOverview.message) {
                    return <p className="text-center text-gray-400">{globalOverview.message}</p>;
                }

                const actionsLabels = {
                    "link_click": "Cliques em Links",
                    "lead": "Leads",
                    "purchase": "Compras",
                    // Adicione mais labels conforme necessário para outros action_types
                };

                return (
                    <div>
                        <h2 className="text-xl font-semibold text-center text-green-400 mb-4">Visão Geral Global (Todas as Contas)</h2>
                        <div className="flex flex-wrap justify-around gap-4">
                            <div className="p-4 bg-gray-700 rounded-lg shadow flex-1 min-w-[150px] text-center">
                                <p className="text-gray-400 text-sm">Gasto Total:</p>
                                <p className="text-white text-lg font-bold">{formatCurrency(globalOverview.totalSpend)}</p>
                            </div>
                            <div className="p-4 bg-gray-700 rounded-lg shadow flex-1 min-w-[150px] text-center">
                                <p className="text-gray-400 text-sm">Total Impressões:</p>
                                <p className="text-white text-lg font-bold">{globalOverview.totalImpressions.toLocaleString('pt-BR')}</p>
                            </div>
                            <div className="p-4 bg-gray-700 rounded-lg shadow flex-1 min-w-[150px] text-center">
                                <p className="text-gray-400 text-sm">Total Cliques:</p>
                                <p className="text-white text-lg font-bold">{globalOverview.totalClicks.toLocaleString('pt-BR')}</p>
                            </div>
                            {Object.keys(globalOverview.totalActions).length > 0 ? (
                                Object.entries(globalOverview.totalActions).map(([type, value]) => (
                                    <div key={type} className="p-4 bg-gray-700 rounded-lg shadow flex-1 min-w-[150px] text-center">
                                        <p className="text-gray-400 text-sm">{actionsLabels[type] || type}:</p>
                                        <p className="text-white text-lg font-bold">{value.toLocaleString('pt-BR')}</p>
                                    </div>
                                ))
                            ) : (
                                <div className="p-4 bg-gray-700 rounded-lg shadow flex-1 min-w-[150px] text-center">
                                    <p className="text-gray-400 text-sm">Ações:</p>
                                    <p className="text-white text-lg font-bold">0</p>
                                </div>
                            )}
                        </div>
                        <p className="text-center text-gray-400 text-xs mt-4">Métricas agregadas de todas as contas para o período selecionado.</p>
                    </div>
                );
            };

            const renderContent = () => {
                if (loading) {
                    return <p className="text-center text-gray-400 text-lg py-8">Carregando dados...</p>;
                }
                if (error) {
                    return <p className="text-center text-red-500 text-lg py-8">Erro: {error}</p>;
                }

                // Filtering logic based on selectedCampaignId
                const filteredCampaigns = selectedCampaignId ? campaigns.filter(c => c.id === selectedCampaignId) : campaigns;
                const adSetsInSelectedCampaign = selectedCampaignId ? adSets.filter(a => a.campaign_id === selectedCampaignId) : adSets;
                const adsInSelectedCampaign = selectedCampaignId
                    ? ads.filter(ad => adSetsInSelectedCampaign.some(adset => adset.id === ad.adset_id))
                    : ads;

                const campaignName = selectedCampaignId ? campaigns.find(c => c.id === selectedCampaignId)?.name || "Campanha Desconhecida" : "";

                return (
                    <div>
                        {(activeTab === 'adsets' || activeTab === 'ads') && selectedCampaignId && (
                            <button
                                onClick={handleBackToCampaigns}
                                className="mb-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md flex items-center gap-2 transition duration-200"
                            >
                                <i className="fas fa-arrow-left"></i> Voltar para Campanhas
                            </button>
                        )}
                        {(activeTab === 'adsets' || activeTab === 'ads') && selectedCampaignId && (
                            <h2 className="text-xl font-semibold mb-4 text-gray-200">
                                {activeTab === 'adsets' ? `Conjuntos de Anúncios para: ${campaignName}` : `Anúncios para Campanha: ${campaignName}`}
                            </h2>
                        )}
                        {activeTab === 'campaigns' && !selectedCampaignId && (
                            <h2 className="text-xl font-semibold mb-4 text-gray-200">Todas as Campanhas</h2>
                        )}
                        {activeTab === 'adsets' && !selectedCampaignId && (
                            <h2 className="text-xl font-semibold mb-4 text-gray-200">Todos os Conjuntos de Anúncios</h2>
                        )}
                        {activeTab === 'ads' && !selectedCampaignId && (
                            <h2 className="text-xl font-semibold mb-4 text-gray-200">Todos os Anúncios</h2>
                        )}

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            {activeTab === 'campaigns' && (
                                filteredCampaigns.length > 0 ? (
                                    filteredCampaigns.map(camp => (
                                        <div
                                            key={camp.id}
                                            className={`bg-gray-800 p-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border ${selectedCampaignId === camp.id ? 'border-green-500' : 'border-gray-700'}`}
                                            onClick={() => handleCampaignClick(camp.id)}
                                        >
                                            <h3 className="text-lg font-bold text-green-400 mb-2 truncate-text">{camp.name}</h3>
                                            <div className="mb-2">
                                                {renderStatus(camp.status)} {renderStatus(camp.effective_status)}
                                            </div>
                                            <p className="text-sm"><strong>ID:</strong> <span className="text-gray-300">{camp.id}</span></p>
                                            <p className="text-sm"><strong>Início:</strong> <span className="text-gray-300">{formatDate(camp.start_time)}</span></p>
                                            <p className="text-sm"><strong>Fim:</strong> <span className="text-gray-300">{formatDate(camp.stop_time)}</span></p>
                                            <p className="text-sm"><strong>Impressões:</strong> <span className="text-gray-300">{camp.insights.impressions || 0}</span></p>
                                            <p className="text-sm"><strong>Cliques:</strong> <span className="text-gray-300">{camp.insights.clicks || 0}</span></p>
                                            <p className="text-sm"><strong>Gasto:</strong> <span className="text-gray-300">{formatCurrency(camp.insights.spend || 0)}</span></p>
                                            <div className="mt-2 text-gray-300">{renderActions(camp.insights.actions)}</div>
                                        </div>
                                    ))
                                ) : (
                                    <p className="col-span-full text-center text-gray-400">Nenhuma campanha encontrada.</p>
                                )
                            )}

                            {activeTab === 'adsets' && (
                                adSetsInSelectedCampaign.length > 0 ? (
                                    adSetsInSelectedCampaign.map(adset => (
                                        <div key={adset.id} className="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
                                            <h3 className="text-lg font-bold text-green-400 mb-2 truncate-text">{adset.name}</h3>
                                            <div className="mb-2">{renderStatus(adset.status)}</div>
                                            <p className="text-sm"><strong>ID:</strong> <span className="text-gray-300">{adset.id}</span></p>
                                            <p className="text-sm"><strong>Campanha ID:</strong> <span className="text-gray-300">{adset.campaign_id}</span></p>
                                            <p className="text-sm"><strong>Início:</strong> <span className="text-gray-300">{formatDate(adset.start_time)}</span></p>
                                            <p className="text-sm"><strong>Fim:</strong> <span className="text-gray-300">{formatDate(adset.end_time)}</span></p>
                                            <p className="text-sm"><strong>Orçamento diário:</strong> <span className="text-gray-300">{formatCurrency((adset.daily_budget || 0) / 100)}</span></p>
                                            <p className="text-sm"><strong>Impressões:</strong> <span className="text-gray-300">{adset.insights.impressions || 0}</span></p>
                                            <p className="text-sm"><strong>Cliques:</strong> <span className="text-gray-300">{adset.insights.clicks || 0}</span></p>
                                            <p className="text-sm"><strong>Gasto:</strong> <span className="text-gray-300">{formatCurrency(adset.insights.spend || 0)}</span></p>
                                            <div className="mt-2 text-gray-300">{renderActions(adset.insights.actions)}</div>
                                        </div>
                                    ))
                                ) : (
                                    <p className="col-span-full text-center text-gray-400">Nenhum conjunto de anúncios encontrado.</p>
                                )
                            )}

                            {activeTab === 'ads' && (
                                adsInSelectedCampaign.length > 0 ? (
                                    adsInSelectedCampaign.map(ad => (
                                        <div key={ad.id} className="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
                                            <h3 className="text-lg font-bold text-green-400 mb-2 truncate-text">{ad.name}</h3>
                                            <div className="mb-2">{renderStatus(ad.status)}</div>
                                            <p className="text-sm"><strong>ID:</strong> <span className="text-gray-300">{ad.id}</span></p>
                                            <p className="text-sm"><strong>Conjunto de Anúncios ID:</strong> <span className="text-gray-300">{ad.adset_id}</span></p>
                                            {ad.preview_url && (
                                                <img src={ad.preview_url} alt="Prévia do Criativo" className="w-full h-auto rounded-md my-2" />
                                            )}
                                            <p className="text-sm"><strong>Impressões:</strong> <span className="text-gray-300">{ad.insights.impressions || 0}</span></p>
                                            <p className="text-sm"><strong>Cliques:</strong> <span className="text-gray-300">{ad.insights.clicks || 0}</span></p>
                                            <p className="text-sm"><strong>Gasto:</strong> <span className="text-gray-300">{formatCurrency(ad.insights.spend || 0)}</span></p>
                                            <p className="text-sm"><strong>CTR:</strong> <span className="text-gray-300">{(parseFloat(ad.insights.ctr) || 0).toFixed(2)}%</span></p>
                                            <p className="text-sm"><strong>CPC:</strong> <span className="text-gray-300">{formatCurrency(parseFloat(ad.insights.cpc) || 0)}</span></p>
                                            <p className="text-sm"><strong>CPM:</strong> <span className="text-gray-300">{formatCurrency(parseFloat(ad.insights.cpm) || 0)}</span></p>
                                            <div className="mt-2 text-gray-300">{renderActions(ad.insights.actions)}</div>
                                        </div>
                                    ))
                                ) : (
                                    <p className="col-span-full text-center text-gray-400">Nenhum anúncio encontrado.</p>
                                )
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Existing HotLead Dashboard Components (Complete components from your index (1).html / index (2).html) ---
        // Você já tem esses componentes definidos. Mantenha-os aqui exatamente como estão no seu arquivo.
        // Adicionei a função Dashboard como um exemplo. Certifique-se de ter todos os seus outros componentes (SalesPage, BotsPage, IntegrationsPage, CreateCheckout) definidos aqui também.

        const Header = ({ onNavigate, currentPage, toggleDarkMode, isDarkMode }) => (
            <header className="bg-white dark:bg-gray-800 shadow-md py-4">
                <div className="container mx-auto flex justify-between items-center px-4">
                    <h1 className="text-2xl font-bold text-gray-800 dark:text-white">HotLead Dashboard</h1>
                    <nav className="space-x-4">
                        <button onClick={() => onNavigate('dashboard')} className={`text-gray-600 dark:text-gray-300 hover:text-green-500 ${currentPage === 'dashboard' ? 'text-green-500 font-bold' : ''}`}>Dashboard</button>
                        <button onClick={() => onNavigate('sales')} className={`text-gray-600 dark:text-gray-300 hover:text-green-500 ${currentPage === 'sales' ? 'text-green-500 font-bold' : ''}`}>Sales</button>
                        <button onClick={() => onNavigate('bots')} className={`text-gray-600 dark:text-gray-300 hover:text-green-500 ${currentPage === 'bots' ? 'text-green-500 font-bold' : ''}`}>Bots</button>
                        <button onClick={() => onNavigate('integrations')} className={`text-gray-600 dark:text-gray-300 hover:text-green-500 ${currentPage === 'integrations' ? 'text-green-500 font-bold' : ''}`}>Integrations</button>
                        <button onClick={() => onNavigate('create-checkout')} className={`text-gray-600 dark:text-gray-300 hover:text-green-500 ${currentPage === 'create-checkout' ? 'text-green-500 font-bold' : ''}`}>Checkout</button>
                        <button onClick={() => onNavigate('campaigns')} className={`text-gray-600 dark:text-gray-300 hover:text-green-500 ${currentPage === 'campaigns' ? 'text-green-500 font-bold' : ''}`}>Campaigns</button>
                    </nav>
                    <button id="darkModeToggle" onClick={toggleDarkMode} className="text-gray-600 dark:text-gray-300 text-xl focus:outline-none">
                        <i className={`fas ${isDarkMode ? 'fa-sun' : 'fa-moon'}`}></i>
                    </button>
                </div>
            </header>
        );

        // Placeholder components - REPLACE with your actual Dashboard, SalesPage, BotsPage, IntegrationsPage, CreateCheckout components
        // from your original index (2).html file.
        const Dashboard = () => (
            <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 className="text-xl font-bold text-gray-800 dark:text-white mb-4">Overview Dashboard</h2>
                <p className="text-gray-600 dark:text-gray-300">Conteúdo do Dashboard principal.</p>
            </div>
        );
        const SalesPage = () => (
            <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 className="text-xl font-bold text-gray-800 dark:text-white mb-4">Sales Page</h2>
                <p className="text-gray-600 dark:text-gray-300">Detalhes das vendas aqui.</p>
            </div>
        );
        const BotsPage = () => (
            <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 className="text-xl font-bold text-gray-800 dark:text-white mb-4">Bots Page</h2>
                <p className="text-gray-600 dark:text-gray-300">Gerenciamento de bots.</p>
            </div>
        );
        const IntegrationsPage = () => (
            <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 className="text-xl font-bold text-gray-800 dark:text-white mb-4">Integrations Page</h2>
                <p className="text-gray-600 dark:text-gray-300">Configurações de integração.</p>
            </div>
        );
        const CreateCheckout = () => (
            <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 className="text-xl font-bold text-gray-800 dark:text-white mb-4">Create Checkout Page</h2>
                <p className="text-gray-600 dark:text-gray-300">Criação de checkouts.</p>
            </div>
        );


        // --- Main App Component ---
        function App() {
            const [currentPage, setCurrentPage] = useState('campaigns'); // Defina 'campaigns' como página inicial para testar
            const [isDarkMode, setIsDarkMode] = useState(false);

            useEffect(() => {
                // Tenta carregar a preferência do usuário ou usa a preferência do sistema
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme) {
                    setIsDarkMode(savedTheme === 'dark');
                } else {
                    setIsDarkMode(window.matchMedia('(prefers-color-scheme: dark)').matches);
                }
            }, []);

            useEffect(() => {
                // Aplica ou remove a classe 'dark' do elemento html
                if (isDarkMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                // Salva a preferência no localStorage
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            }, [isDarkMode]);

            const toggleDarkMode = () => {
                setIsDarkMode(prevMode => !prevMode);
            };

            const navigateTo = (page) => {
                setCurrentPage(page);
            };

            return (
                <div className="min-h-screen bg-gray-100 font-sans dark:bg-gray-900 transition-colors duration-300">
                    <Header onNavigate={navigateTo} currentPage={currentPage} toggleDarkMode={toggleDarkMode} isDarkMode={isDarkMode} />
                    <main className="container mx-auto p-4">
                        {currentPage === 'dashboard' && <Dashboard />}
                        {currentPage === 'sales' && <SalesPage />}
                        {currentPage === 'bots' && <BotsPage />}
                        {currentPage === 'integrations' && <IntegrationsPage />}
                        {currentPage === 'create-checkout' && <CreateCheckout />}
                        {currentPage === 'campaigns' && <CampaignsPage />} {/* Sua CampaignsPage está aqui agora! */}
                    </main>
                </div>
            );
        }

        // Renderiza o aplicativo React no elemento 'root' do HTML
        window.onload = function() {
            ReactDOM.createRoot(document.getElementById('root')).render(<App />);
        };

    </script>
</body>
</html>
